import{r as i,j as e,R as S}from"./radix-vendor-DXnqCESz.js";import{B as P,k as n,C as r,e as l,n as y,T as A,r as R,s as v,t as b,b as h,c as u,l as o,u as U}from"./index-DHeBa6N9.js";import{P as j}from"./progress-05Dja7FS.js";import{R as D,W as C,U as E,a6 as w,af as L,H as k,d as T,w as J,ab as I,ac as Q,N as B,ag as F,K as H}from"./icons-vendor-4PzZcNxV.js";import"./react-vendor-BS3SOam5.js";import"./utils-vendor-CbK4XRml.js";import"./date-vendor-Cb250gQT.js";const M={uploadCount:1247,uploadChange:12.5,processingQueue:8,failedJobs:15,failedChange:-5.2,storageUsed:45.2,storageTotal:100,successRate:98.5,avgProcessingTime:4.2,recentUploads:23},W=[{id:"1",name:"Transcribe: Sunday Sermon.mp3",status:"processing",progress:75,startedAt:new Date,eta:"2m"},{id:"2",name:"Generate Thumbnails",status:"processing",progress:45,startedAt:new Date,eta:"5m"},{id:"3",name:"Audio Enhancement",status:"pending",progress:0,startedAt:new Date},{id:"4",name:"Metadata Extraction",status:"completed",progress:100,startedAt:new Date},{id:"5",name:"Upload to CDN",status:"failed",progress:0,startedAt:new Date}];function z(a=3e4){const[d,p]=i.useState(M),[m,g]=i.useState(!1),[x,t]=i.useState(!1),[f,N]=i.useState(new Date),s=async()=>{t(!0);try{await new Promise(c=>setTimeout(c,500)),N(new Date)}catch(c){console.error("Error fetching stats:",c),U.error("Failed to refresh stats")}finally{t(!1)}};return S.useEffect(()=>{s();const c=setInterval(s,a);return()=>clearInterval(c)},[a]),{stats:d,isLoading:m,isRefetching:x,lastUpdated:f,refetch:s}}function O(a=5e3){const[d,p]=i.useState(W),[m,g]=i.useState(!1),x=async()=>{try{await new Promise(t=>setTimeout(t,300))}catch(t){console.error("Error fetching jobs:",t)}};return S.useEffect(()=>{x();const t=setInterval(x,a);return()=>clearInterval(t)},[a]),{jobs:d,isLoading:m}}function Z(){const{stats:a,isRefetching:d,lastUpdated:p,refetch:m}=z(),{jobs:g}=O(),[x,t]=i.useState("overview"),f=s=>{switch(s){case"processing":return"text-blue-500";case"completed":return"text-green-500";case"failed":return"text-red-500";default:return"text-gray-500"}},N=s=>{switch(s){case"processing":return"bg-blue-100 text-blue-700";case"completed":return"bg-green-100 text-green-700";case"failed":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),e.jsxs("p",{className:"text-gray-500 mt-1",children:["Real-time sermon processing overview",e.jsxs("span",{className:"ml-2 text-xs text-gray-400",children:["Last updated: ",p.toLocaleTimeString()]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>m(),disabled:d,children:[e.jsx(D,{className:n("w-4 h-4 mr-2",d&&"animate-spin")}),"Refresh"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(r,{children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Uploads"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:a.uploadCount.toLocaleString()}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(C,{className:"w-4 h-4 text-green-500"}),e.jsxs("span",{className:"text-sm text-green-600",children:["+",a.uploadChange,"%"]})]})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(E,{className:"w-6 h-6 text-blue-600"})})]})})}),e.jsx(r,{children:e.jsxs(l,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Processing Queue"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:a.processingQueue}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Active jobs"})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:e.jsx(w,{className:"w-6 h-6 text-purple-600"})})]}),e.jsx("div",{className:"mt-4",children:e.jsx(j,{value:Math.min(a.processingQueue*10,100),className:"h-2"})})]})}),e.jsx(r,{children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Failed Jobs"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:a.failedJobs}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(C,{className:n("w-4 h-4",a.failedChange<0?"text-green-500":"text-red-500")}),e.jsxs("span",{className:n("text-sm",a.failedChange<0?"text-green-600":"text-red-600"),children:[a.failedChange>0?"+":"",a.failedChange,"%"]})]})]}),e.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:e.jsx(L,{className:"w-6 h-6 text-red-600"})})]})})}),e.jsx(r,{children:e.jsxs(l,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Storage Used"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:y(a.storageUsed*1024*1024*1024)}),e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["of ",y(a.storageTotal*1024*1024*1024)]})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(k,{className:"w-6 h-6 text-green-600"})})]}),e.jsx("div",{className:"mt-4",children:e.jsx(j,{value:a.storageUsed/a.storageTotal*100,className:"h-2"})})]})})]}),e.jsxs(A,{value:x,onValueChange:t,children:[e.jsxs(R,{children:[e.jsx(v,{value:"overview",children:"Overview"}),e.jsx(v,{value:"processing",children:"Processing Queue"}),e.jsx(v,{value:"recent",children:"Recent Activity"})]}),e.jsx(b,{value:"overview",className:"mt-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(r,{children:[e.jsx(h,{children:e.jsx(u,{className:"text-lg",children:"Performance Metrics"})}),e.jsxs(l,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(T,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{children:"Success Rate"})]}),e.jsxs("span",{className:"font-semibold",children:[a.successRate,"%"]})]}),e.jsx(j,{value:a.successRate,className:"h-2"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(J,{className:"w-5 h-5 text-blue-500"}),e.jsx("span",{children:"Avg Processing Time"})]}),e.jsxs("span",{className:"font-semibold",children:[a.avgProcessingTime," min"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(I,{className:"w-5 h-5 text-purple-500"}),e.jsx("span",{children:"Recent Uploads (7 days)"})]}),e.jsx("span",{className:"font-semibold",children:a.recentUploads})]})]})]}),e.jsxs(r,{children:[e.jsx(h,{children:e.jsx(u,{className:"text-lg",children:"System Health"})}),e.jsxs(l,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(w,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{children:"API Status"})]}),e.jsx(o,{className:"bg-green-100 text-green-700",children:"Operational"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Q,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{children:"Database"})]}),e.jsx(o,{className:"bg-green-100 text-green-700",children:"Connected"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(w,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{children:"Celery Workers"})]}),e.jsx(o,{className:"bg-green-100 text-green-700",children:"4 Active"})]})]})]})]})}),e.jsx(b,{value:"processing",className:"mt-6",children:e.jsxs(r,{children:[e.jsx(h,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(u,{className:"text-lg",children:"Processing Queue"}),e.jsxs(o,{variant:"secondary",children:[g.filter(s=>s.status==="processing").length," active"]})]})}),e.jsx(l,{children:e.jsx("div",{className:"space-y-3",children:g.map(s=>e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg border",children:[e.jsxs("div",{className:n("w-10 h-10 rounded-full flex items-center justify-center",s.status==="processing"?"bg-blue-100":s.status==="completed"?"bg-green-100":s.status==="failed"?"bg-red-100":"bg-gray-100"),children:[s.status==="processing"&&e.jsx(B,{className:"w-5 h-5 text-blue-600"}),s.status==="completed"&&e.jsx(T,{className:"w-5 h-5 text-green-600"}),s.status==="failed"&&e.jsx(F,{className:"w-5 h-5 text-red-600"}),s.status==="pending"&&e.jsx(H,{className:"w-5 h-5 text-gray-600"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(o,{className:n("text-xs",N(s.status)),children:s.status}),s.eta&&e.jsxs("span",{className:"text-xs text-gray-500",children:["ETA: ",s.eta]})]}),s.status==="processing"&&e.jsx(j,{value:s.progress,className:"h-1 mt-2"})]}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:n("font-semibold",f(s.status)),children:s.status==="processing"?`${s.progress}%`:s.status})})]},s.id))})})]})}),e.jsx(b,{value:"recent",className:"mt-6",children:e.jsxs(r,{children:[e.jsx(h,{children:e.jsx(u,{className:"text-lg",children:"Recent Activity"})}),e.jsx(l,{children:e.jsx("div",{className:"space-y-4",children:[{action:"Upload",file:"Sunday Sermon.mp3",time:"2 min ago",status:"success"},{action:"Transcribe",file:"Wednesday Prayer.mp3",time:"5 min ago",status:"success"},{action:"Process",file:"Youth Meeting.mp4",time:"10 min ago",status:"processing"},{action:"Failed",file:"Test Audio.wav",time:"15 min ago",status:"failed"},{action:"Publish",file:"Sunday Sermon.mp3",time:"1 hour ago",status:"success"}].map((s,c)=>e.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg hover:bg-gray-50",children:[e.jsx("div",{className:n("w-2 h-2 rounded-full",s.status==="success"?"bg-green-500":s.status==="processing"?"bg-blue-500":"bg-red-500")}),e.jsx("div",{className:"flex-1",children:e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:s.action})," - ",e.jsx("span",{className:"text-gray-600",children:s.file})]})}),e.jsx("span",{className:"text-xs text-gray-400",children:s.time})]},c))})})]})})]})]})}export{Z as Dashboard,Z as default};
//# sourceMappingURL=Dashboard-BOAbXNkW.js.map
