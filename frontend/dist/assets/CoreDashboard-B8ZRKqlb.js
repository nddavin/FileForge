import{r as g,j as e}from"./radix-vendor-DXnqCESz.js";import{j as te,C as x,e as m,n as I,I as le,S as V,f as E,g as U,h as Q,i as N,B as j,l as D,k as v,o as re}from"./index-DHeBa6N9.js";import{C as R}from"./checkbox-BN-lIGCg.js";import{l as O,H as ce,j as P,k as H,w as ie,o as A,f as Z,t as ne,A as de,u as oe,x as xe,y as me,R as he,v as G,p as je,q as ge,z as pe,Z as ue}from"./icons-vendor-4PzZcNxV.js";import{E as Ne}from"./date-vendor-Cb250gQT.js";import"./react-vendor-BS3SOam5.js";import"./utils-vendor-CbK4XRml.js";function ke(){const{files:o,loading:J,refreshFiles:K,selectedFiles:y,toggleSelection:f,selectAll:X,clearSelection:Y}=te(),[S,M]=g.useState("grid"),[p,C]=g.useState(""),[u,k]=g.useState("all"),[z,$]=g.useState("created_at"),[F,ee]=g.useState("desc"),[se,ae]=g.useState(!1),h=g.useMemo(()=>{const s=o.reduce((r,d)=>r+d.size,0),a=o.filter(r=>r.type.startsWith("audio/")).length,t=o.filter(r=>r.type.startsWith("video/")).length,l=o.filter(r=>{const d=new Date;return d.setDate(d.getDate()-7),new Date(r.created_at)>=d}).length,c={},i=new Set,n=new Set;return o.forEach(r=>{var b,W,B;const d=((b=r.metadata)==null?void 0:b.status)||"uploaded";c[d]=(c[d]||0)+1,(W=r.metadata)!=null&&W.speaker&&i.add(r.metadata.speaker),(B=r.metadata)!=null&&B.series&&n.add(r.metadata.series)}),{totalFiles:o.length,totalSize:s,audioCount:a,videoCount:t,byStatus:c,recentUploads:l,speakers:Array.from(i).sort(),series:Array.from(n).sort()}},[o]),w=g.useMemo(()=>{let s=[...o];if(p){const a=p.toLowerCase();s=s.filter(t=>{var l,c,i,n,r,d;return t.name.toLowerCase().includes(a)||((c=(l=t.metadata)==null?void 0:l.speaker)==null?void 0:c.toLowerCase().includes(a))||((n=(i=t.metadata)==null?void 0:i.series)==null?void 0:n.toLowerCase().includes(a))||((d=(r=t.metadata)==null?void 0:r.tags)==null?void 0:d.some(b=>b.toLowerCase().includes(a)))})}return u!=="all"&&(s=s.filter(a=>{var t;return((t=a.metadata)==null?void 0:t.speaker)===u})),s.sort((a,t)=>{var c,i,n,r;let l=0;switch(z){case"name":l=a.name.localeCompare(t.name);break;case"size":l=a.size-t.size;break;case"qualityScore":l=(((c=a.metadata)==null?void 0:c.qualityScore)||0)-(((i=t.metadata)==null?void 0:i.qualityScore)||0);break;case"confidence":l=(((n=a.metadata)==null?void 0:n.confidence)||0)-(((r=t.metadata)==null?void 0:r.confidence)||0);break;case"created_at":default:l=new Date(a.created_at).getTime()-new Date(t.created_at).getTime();break}return F==="desc"?-l:l}),s},[o,p,u,z,F]),T=s=>s.startsWith("audio/")?P:s.startsWith("video/")?H:O,_=s=>{const a={uploaded:{label:"Uploaded",className:"bg-gray-100 text-gray-700"},transcribed:{label:"Transcribed",className:"bg-blue-100 text-blue-700"},reviewed:{label:"Reviewed",className:"bg-yellow-100 text-yellow-700"},published:{label:"Published",className:"bg-green-100 text-green-700"}},{label:t,className:l}=a[s]||{label:s,className:"bg-gray-100 text-gray-700"};return e.jsx(D,{className:v("text-xs",l),children:t})},q=s=>{var l;const a=((l=s.metadata)==null?void 0:l.qualityScore)||Math.floor(Math.random()*30+70),t=a>=90?"text-green-600":a>=70?"text-yellow-600":"text-red-600";return e.jsxs("div",{className:v("flex items-center gap-1 text-sm font-medium",t),children:[e.jsx(pe,{className:"w-3 h-3"}),a,"%"]})},L=s=>{var l;const a=((l=s.metadata)==null?void 0:l.confidence)||Math.floor(Math.random()*25+75),t=a>=90?"text-green-600":a>=70?"text-yellow-600":"text-red-600";return e.jsxs("div",{className:v("flex items-center gap-1 text-sm font-medium",t),children:[e.jsx(ue,{className:"w-3 h-3"}),a,"%"]})};return J?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"text-lg text-gray-500",children:"Loading dashboard..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[e.jsx(x,{className:"col-span-1",children:e.jsx(m,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(O,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:h.totalFiles}),e.jsx("p",{className:"text-xs text-gray-500",children:"Total Files"})]})]})})}),e.jsx(x,{className:"col-span-1",children:e.jsx(m,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(ce,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:I(h.totalSize)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Total Size"})]})]})})}),e.jsx(x,{className:"col-span-1",children:e.jsx(m,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(P,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:h.audioCount}),e.jsx("p",{className:"text-xs text-gray-500",children:"Audio"})]})]})})}),e.jsx(x,{className:"col-span-1",children:e.jsx(m,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(H,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:h.videoCount}),e.jsx("p",{className:"text-xs text-gray-500",children:"Video"})]})]})})}),e.jsx(x,{className:"col-span-1",children:e.jsx(m,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(ie,{className:"w-5 h-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:h.recentUploads}),e.jsx("p",{className:"text-xs text-gray-500",children:"This Week"})]})]})})}),e.jsx(x,{className:"col-span-1",children:e.jsx(m,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:e.jsx(A,{className:"w-5 h-5 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:h.speakers.length}),e.jsx("p",{className:"text-xs text-gray-500",children:"Speakers"})]})]})})})]}),e.jsx(x,{children:e.jsxs(m,{className:"p-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 w-full lg:w-auto",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(le,{placeholder:"Search files, speakers, series...",value:p,onChange:s=>C(s.target.value),className:"pl-10"})]}),e.jsxs(V,{value:u,onValueChange:k,children:[e.jsxs(E,{className:"w-[180px]",children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),e.jsx(U,{placeholder:"All Speakers"})]}),e.jsxs(Q,{children:[e.jsx(N,{value:"all",children:"All Speakers"}),h.speakers.map(s=>e.jsx(N,{value:s,children:s},s))]})]}),e.jsxs(j,{variant:"outline",size:"sm",onClick:()=>ae(!se),className:"hidden lg:flex",children:[e.jsx(ne,{className:"w-4 h-4 mr-1"}),"Filters"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[y.size>0&&e.jsxs("div",{className:"flex items-center gap-2 mr-4",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:[y.size," selected"]}),e.jsx(j,{variant:"outline",size:"sm",onClick:Y,children:"Clear"}),e.jsx(j,{variant:"outline",size:"sm",onClick:X,children:"Select All"})]}),e.jsxs(V,{value:z,onValueChange:s=>$(s),children:[e.jsx(E,{className:"w-[140px]",children:e.jsx(U,{placeholder:"Sort by"})}),e.jsxs(Q,{children:[e.jsx(N,{value:"created_at",children:"Date"}),e.jsx(N,{value:"name",children:"Name"}),e.jsx(N,{value:"size",children:"Size"}),e.jsx(N,{value:"qualityScore",children:"Quality Score"}),e.jsx(N,{value:"confidence",children:"Confidence"})]})]}),e.jsx(j,{variant:"outline",size:"icon",onClick:()=>ee(s=>s==="asc"?"desc":"asc"),children:F==="asc"?e.jsx(de,{className:"w-4 h-4"}):e.jsx(oe,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex items-center border rounded-md",children:[e.jsx(j,{variant:S==="grid"?"secondary":"ghost",size:"icon",className:"rounded-r-none",onClick:()=>M("grid"),children:e.jsx(xe,{className:"w-4 h-4"})}),e.jsx(j,{variant:S==="list"?"secondary":"ghost",size:"icon",className:"rounded-l-none",onClick:()=>M("list"),children:e.jsx(me,{className:"w-4 h-4"})})]}),e.jsx(j,{variant:"outline",size:"icon",onClick:()=>K(),children:e.jsx(he,{className:"w-4 h-4"})})]})]}),(p||u!=="all")&&e.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t",children:[p&&e.jsxs(D,{variant:"secondary",className:"gap-1",children:["Search: ",p,e.jsxs("button",{onClick:()=>C(""),children:[e.jsx("span",{className:"sr-only",children:"Clear"}),"×"]})]}),u!=="all"&&e.jsxs(D,{variant:"secondary",className:"gap-1",children:["Speaker: ",u,e.jsxs("button",{onClick:()=>k("all"),children:[e.jsx("span",{className:"sr-only",children:"Clear"}),"×"]})]}),e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>{C(""),k("all")},children:"Clear all"})]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",w.length," of ",o.length," files"]}),h.series.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[h.series.length," series"]})]})]}),w.length===0?e.jsx(x,{children:e.jsxs(m,{className:"flex flex-col items-center justify-center py-16",children:[e.jsx(Z,{className:"w-16 h-16 text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No files found"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Try adjusting your search or filters"})]})}):S==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:w.map(s=>{var l,c,i;const a=T(s.type),t=y.has(s.id);return e.jsx(x,{className:v("cursor-pointer transition-all hover:shadow-md",t?"ring-2 ring-blue-500":""),onClick:()=>f(s.id),children:e.jsx(m,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(R,{checked:t,onCheckedChange:()=>f(s.id),onClick:n=>n.stopPropagation()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(a,{className:"w-10 h-10 text-blue-500 flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:s.name}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:_(((l=s.metadata)==null?void 0:l.status)||"uploaded")})]})]}),e.jsxs("div",{className:"mt-3 space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(je,{className:"w-3 h-3"}),Ne(new Date(s.created_at),"MMM d, yyyy")]}),e.jsx("span",{children:I(s.size)})]}),((c=s.metadata)==null?void 0:c.speaker)&&e.jsxs("p",{className:"text-xs text-gray-600 flex items-center gap-1",children:[e.jsx(A,{className:"w-3 h-3"}),s.metadata.speaker]}),((i=s.metadata)==null?void 0:i.series)&&e.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(G,{className:"w-3 h-3"}),s.metadata.series]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t",children:[q(s),L(s)]})]})]})})},s.id)})}):e.jsx(x,{children:e.jsx(m,{className:"p-0",children:e.jsx("div",{className:"divide-y",children:w.map(s=>{var l,c,i;const a=T(s.type),t=y.has(s.id);return e.jsxs("div",{className:v("flex items-center gap-4 p-4 cursor-pointer hover:bg-gray-50 transition-colors",t?"bg-blue-50":""),onClick:()=>f(s.id),children:[e.jsx(R,{checked:t,onCheckedChange:()=>f(s.id),onClick:n=>n.stopPropagation()}),e.jsx(a,{className:"w-8 h-8 text-blue-500 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:s.name}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[((l=s.metadata)==null?void 0:l.speaker)&&e.jsx("span",{className:"text-xs text-gray-500",children:s.metadata.speaker}),((c=s.metadata)==null?void 0:c.series)&&e.jsxs("span",{className:"text-xs text-gray-400",children:["| ",s.metadata.series]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[q(s),L(s),_(((i=s.metadata)==null?void 0:i.status)||"uploaded"),e.jsx("span",{className:"text-xs text-gray-500 w-24 text-right",children:re(new Date(s.created_at),{addSuffix:!0})}),e.jsx(j,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(ge,{className:"w-4 h-4"})})]})]},s.id)})})})})]})}export{ke as CoreDashboard,ke as default};
//# sourceMappingURL=CoreDashboard-B8ZRKqlb.js.map
