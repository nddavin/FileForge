import{j as e,A as ne,B as ie,r as m,R as le}from"./radix-vendor-DXnqCESz.js";import{k as l,B as n,C as r,b as N,c as b,e as d,D as re,w as de,x as oe,y as me,z as xe,S as he,f as ge,g as pe,h as ue,i as je,A as Ne,l as g,u as h}from"./index-DHeBa6N9.js";import{P as be}from"./progress-05Dja7FS.js";import{a5 as fe,a6 as S,Z as O,a7 as U,P as k,Y as ve,L as M,N as ye,U as we,j as Ce,D as Se,a0 as ke,S as Pe,a8 as Re,c as Ae,_ as Te,d as $,w as G,R as ze,a9 as _,aa as Ee,ab as Ie,ac as H,ad as De,ae as Be,$ as Le}from"./icons-vendor-4PzZcNxV.js";import"./react-vendor-BS3SOam5.js";import"./utils-vendor-CbK4XRml.js";import"./date-vendor-Cb250gQT.js";function A({className:o,...p}){return e.jsx(ne,{"data-slot":"switch",className:l("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",o),...p,children:e.jsx(ie,{"data-slot":"switch-thumb",className:l("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const y=[{id:"upload",name:"Upload",icon:we,color:"bg-blue-500",description:"File upload trigger"},{id:"extract",name:"Extract",icon:Ce,color:"bg-green-500",description:"Extract audio/video"},{id:"analyze",name:"Analyze",icon:Se,color:"bg-purple-500",description:"AI analysis"},{id:"optimize",name:"Optimize",icon:ke,color:"bg-orange-500",description:"Format optimization"},{id:"distribute",name:"Distribute",icon:Pe,color:"bg-cyan-500",description:"Publish & share"}],Fe=[{id:"slack",name:"Slack",icon:e.jsx(Be,{className:"w-5 h-5"}),status:"connected",lastSync:"2 min ago",details:{channels:3,workspace:"church-team"},enabled:!0},{id:"teams",name:"Microsoft Teams",icon:e.jsx(Le,{className:"w-5 h-5"}),status:"connected",lastSync:"5 min ago",details:{teams:2,tenant:"church.org"},enabled:!0},{id:"salesforce",name:"Salesforce",icon:e.jsx(H,{className:"w-5 h-5"}),status:"error",lastSync:"2 hours ago",error:"Rate limit exceeded",details:{objects:["Contact","Campaign"]},enabled:!1}],Je=[{id:"1",name:"Transcribe Sermons",progress:75,status:"processing",eta:"2m"},{id:"2",name:"Generate Thumbnails",progress:100,status:"completed",eta:null},{id:"3",name:"Upload to CDN",progress:45,status:"processing",eta:"5m"},{id:"4",name:"Send Notifications",progress:0,status:"pending",eta:"10m"}],f={totalProcessed:1247,avgProcessingTime:"4.2 min",successRate:98.5,storageUsed:"45.2 GB",apiCalls:15842,errorRate:1.2};function Ve(){const[o,p]=m.useState("workflows"),[P,R]=m.useState([{id:"1",name:"Sermon Processing Pipeline",description:"Auto-transcribe, generate metadata, and notify team",active:!0,lastRun:new Date,nodes:[{id:"1",type:"trigger",name:"Upload",position:{x:50,y:150},config:{}},{id:"2",type:"process",name:"Extract Audio",position:{x:200,y:150},config:{format:"mp3"}},{id:"3",type:"process",name:"AI Analysis",position:{x:350,y:150},config:{model:"whisper"}},{id:"4",type:"process",name:"Optimize",position:{x:500,y:150},config:{profile:"web"}},{id:"5",type:"action",name:"Notify",position:{x:650,y:100},config:{channel:"slack"}},{id:"6",type:"output",name:"Archive",position:{x:650,y:200},config:{}}],edges:[{source:"1",target:"2"},{source:"2",target:"3"},{source:"3",target:"4"},{source:"4",target:"5"},{source:"4",target:"6"}]}]),[c,T]=m.useState(P[0]),[V,w]=m.useState(!1),[u,C]=m.useState([]),[z,E]=m.useState(!1),[I,D]=m.useState(Fe),[B,L]=m.useState(null),[Z,q]=m.useState(Je),[Y,K]=m.useState([{id:"1",url:"https://feeds.sermon.net",enabled:!0,lastCheck:new Date},{id:"2",url:"https://example.com/podcast",enabled:!1,lastCheck:null}]),F=m.useCallback(async()=>{},[]);m.useEffect(()=>{o==="integrations"&&F()},[o,F]);const J=s=>{switch(s){case"connected":return e.jsx(g,{className:"bg-green-100 text-green-700",children:"Connected"});case"error":return e.jsx(g,{className:"bg-red-100 text-red-700",children:"Error"});case"syncing":return e.jsx(g,{className:"bg-blue-100 text-blue-700",children:"Syncing"});case"processing":return e.jsx(g,{className:"bg-blue-100 text-blue-700",children:"Processing"});case"completed":return e.jsx(g,{className:"bg-gray-100 text-gray-700",children:"Completed"});case"pending":return e.jsx(g,{className:"bg-yellow-100 text-yellow-700",children:"Pending"});default:return e.jsx(g,{variant:"outline",children:s})}},Q=s=>{R(t=>t.map(i=>i.id===s?{...i,active:!i.active}:i));const a=P.find(t=>t.id===s);h.success(a!=null&&a.active?"Workflow paused":"Workflow activated")},W=s=>{T(s),C(s.nodes.map(a=>a.name)),w(!0)},X=async()=>{if(c)try{R(s=>s.map(a=>a.id===c.id?{...a,nodes:a.nodes.map((t,i)=>({...t,name:u[i]||t.name}))}:a)),h.success("Pipeline configuration saved"),w(!1)}catch{h.error("Failed to save pipeline configuration")}},ee=async s=>{E(!0);try{await new Promise(a=>setTimeout(a,2e3)),h.success(`Workflow "${s.name}" executed successfully`),R(a=>a.map(t=>t.id===s.id?{...t,lastRun:new Date}:t))}catch{h.error("Failed to execute workflow")}finally{E(!1)}},se=s=>{K(a=>a.map(t=>t.id===s?{...t,enabled:!t.enabled}:t)),h.success("RSS monitor updated")},ae=async s=>{var a;L(s);try{await new Promise(t=>setTimeout(t,2e3)),D(t=>t.map(i=>i.id===s?{...i,status:"connected",lastSync:"Just now",error:void 0}:i)),h.success(`${(a=I.find(t=>t.id===s))==null?void 0:a.name} synced successfully`)}catch{h.error("Sync failed")}finally{L(null)}},te=s=>{D(a=>a.map(t=>t.id===s?{...t,enabled:!t.enabled}:t)),h.success("Integration updated")},ce=s=>{q(a=>a.filter(t=>t.id!==s)),h.success("Job cancelled")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 border-b pb-2",children:[e.jsxs(n,{variant:o==="workflows"?"secondary":"ghost",onClick:()=>p("workflows"),className:"gap-2",children:[e.jsx(fe,{className:"w-4 h-4"}),"Pipelines"]}),e.jsxs(n,{variant:o==="jobs"?"secondary":"ghost",onClick:()=>p("jobs"),className:"gap-2",children:[e.jsx(S,{className:"w-4 h-4"}),"Batch Jobs"]}),e.jsxs(n,{variant:o==="integrations"?"secondary":"ghost",onClick:()=>p("integrations"),className:"gap-2",children:[e.jsx(O,{className:"w-4 h-4"}),"Integrations"]}),e.jsxs(n,{variant:o==="stats"?"secondary":"ghost",onClick:()=>p("stats"),className:"gap-2",children:[e.jsx(U,{className:"w-4 h-4"}),"Stats"]})]}),o==="workflows"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(r,{className:"lg:col-span-1",children:[e.jsx(N,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{className:"text-lg",children:"Pipelines"}),e.jsxs(n,{size:"sm",children:[e.jsx(k,{className:"w-4 h-4 mr-1"}),"New"]})]})}),e.jsx(d,{className:"space-y-2",children:P.map(s=>e.jsxs("div",{className:l("p-3 rounded-lg border cursor-pointer transition-colors",(c==null?void 0:c.id)===s.id?"border-blue-500 bg-blue-50":"hover:bg-gray-50"),onClick:()=>T(s),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:l("w-2 h-2 rounded-full",s.active?"bg-green-500":"bg-gray-300")}),e.jsx("span",{className:"font-medium text-sm",children:s.name})]}),e.jsx(A,{checked:s.active,onCheckedChange:()=>Q(s.id),onClick:a=>a.stopPropagation()})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate",children:s.description}),s.lastRun&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Last run: ",s.lastRun.toLocaleTimeString()]})]},s.id))})]}),e.jsxs(r,{className:"lg:col-span-2",children:[e.jsx(N,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-lg",children:c==null?void 0:c.name}),e.jsx("p",{className:"text-sm text-gray-500",children:c==null?void 0:c.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>W(c),children:[e.jsx(ve,{className:"w-4 h-4 mr-1"}),"Edit Pipeline"]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>ee(c),disabled:z,children:[z?e.jsx(M,{className:"w-4 h-4 mr-1 animate-spin"}):e.jsx(ye,{className:"w-4 h-4 mr-1"}),"Run"]})]})]})}),e.jsxs(d,{children:[e.jsxs("div",{className:"relative bg-gray-50 rounded-lg p-6 min-h-[300px]",children:[e.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",style:{backgroundImage:"radial-gradient(circle, #000 1px, transparent 1px)",backgroundSize:"20px 20px"}}),e.jsx("div",{className:"flex items-center justify-center gap-2",children:c==null?void 0:c.nodes.map((s,a)=>{var x,j;const t=((x=y.find(v=>v.name.toLowerCase()===s.name.toLowerCase().split(" ")[0].toLowerCase()))==null?void 0:x.icon)||S,i=((j=y.find(v=>v.name.toLowerCase()===s.name.toLowerCase().split(" ")[0].toLowerCase()))==null?void 0:j.color)||"bg-gray-500";return e.jsxs(le.Fragment,{children:[e.jsxs("div",{className:l("flex flex-col items-center gap-2 p-4 rounded-lg border-2 bg-white shadow-sm min-w-[120px]",i.replace("bg-","border-")),children:[e.jsx("div",{className:l("p-2 rounded-full",i),children:e.jsx(t,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"text-sm font-medium text-center",children:s.name})]}),a<c.nodes.length-1&&e.jsx(Re,{className:"w-6 h-6 text-gray-300 flex-shrink-0"})]},s.id)})})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-4 pt-4 border-t flex-wrap",children:[e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Pipeline Stages:"}),y.map(s=>(s.icon,e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:l("w-3 h-3 rounded-full",s.color)}),e.jsx("span",{className:"text-xs",children:s.name})]},s.id)))]})]})]})]}),e.jsx(re,{open:V,onOpenChange:w,children:e.jsxs(de,{className:"max-w-3xl",children:[e.jsxs(oe,{children:[e.jsxs(me,{children:["Edit Pipeline: ",c==null?void 0:c.name]}),e.jsx(xe,{children:"Configure the pipeline stages in order. Drag to reorder or change stages."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsx("div",{className:"space-y-3",children:y.map((s,a)=>{const t=u[a]||s.name,i=u.includes(s.name);return e.jsxs("div",{className:l("flex items-center gap-3 p-3 rounded-lg border transition-colors",i?"bg-white border-gray-200":"bg-gray-50 border-dashed border-gray-300"),children:[e.jsx("div",{className:l("p-2 rounded-lg",s.color),children:e.jsx(s.icon,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500",children:s.description})]}),e.jsxs(he,{value:t,onValueChange:x=>{const j=[...u];j[a]=x,C(j)},children:[e.jsx(ge,{className:"w-[180px]",children:e.jsx(pe,{})}),e.jsx(ue,{children:y.map(x=>e.jsx(je,{value:x.name,children:x.name},x.id))})]}),e.jsx(n,{variant:"ghost",size:"icon",onClick:()=>{const x=u.filter((j,v)=>v!==a);C(x)},children:e.jsx(Ae,{className:"w-4 h-4"})})]},s.id)})}),e.jsxs(n,{variant:"outline",className:"w-full",onClick:()=>C([...u,"Optimize"]),children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Add Stage"]})]}),e.jsxs(Ne,{children:[e.jsx(n,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),e.jsxs(n,{onClick:X,children:[e.jsx(Te,{className:"w-4 h-4 mr-2"}),"Save Configuration"]})]})]})}),o==="jobs"&&e.jsxs(r,{children:[e.jsx(N,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{className:"text-lg",children:"Celery Batch Jobs"}),e.jsxs(n,{size:"sm",children:[e.jsx(k,{className:"w-4 h-4 mr-1"}),"New Job"]})]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:Z.map(s=>e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg border",children:[e.jsx("div",{className:l("w-10 h-10 rounded-full flex items-center justify-center",s.status==="processing"?"bg-blue-100":s.status==="completed"?"bg-green-100":"bg-gray-100"),children:s.status==="processing"?e.jsx(S,{className:"w-5 h-5 text-blue-500 animate-pulse"}):s.status==="completed"?e.jsx($,{className:"w-5 h-5 text-green-500"}):e.jsx(G,{className:"w-5 h-5 text-gray-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsx("span",{className:"text-sm text-gray-500",children:s.eta?`ETA: ${s.eta}`:"Completed"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{value:s.progress,className:"flex-1 h-2"}),e.jsxs("span",{className:"text-sm font-mono w-12 text-right",children:[s.progress,"%"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[J(s.status),s.status==="processing"&&e.jsx(n,{variant:"outline",size:"sm",onClick:()=>ce(s.id),children:"Cancel"})]})]},s.id))})})]}),o==="integrations"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[I.map(s=>e.jsx(r,{children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:l("p-3 rounded-lg",s.status==="connected"?"bg-green-100":s.status==="error"?"bg-red-100":s.status==="syncing"?"bg-blue-100":"bg-gray-100"),children:e.jsx("div",{className:l(s.status==="connected"?"text-green-600":s.status==="error"?"text-red-600":s.status==="syncing"?"text-blue-600":"text-gray-600"),children:s.status==="syncing"?e.jsx(M,{className:"w-5 h-5 animate-spin"}):s.icon})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-medium",children:s.name}),e.jsx(A,{checked:s.enabled,onCheckedChange:()=>te(s.id)})]}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:J(s.status)}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Last sync: ",s.lastSync||"Never"]}),s.error&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:s.error}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:Object.entries(s.details).map(([a,t])=>e.jsxs(g,{variant:"outline",className:"text-xs",children:[a,": ",t]},a))})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t",children:[e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>ae(s.id),disabled:B!==null||!s.enabled,children:[e.jsx(ze,{className:l("w-3 h-3 mr-1",B===s.id&&"animate-spin")}),"Sync Now"]}),e.jsxs(n,{variant:"outline",size:"sm",children:[e.jsx(_,{className:"w-3 h-3 mr-1"}),"Configure"]})]})]})},s.id)),e.jsxs(r,{className:"md:col-span-2",children:[e.jsx(N,{className:"pb-3",children:e.jsxs(b,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ee,{className:"w-5 h-5"}),"RSS Feed Monitor"]})}),e.jsxs(d,{children:[e.jsx("div",{className:"space-y-3",children:Y.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:l("w-2 h-2 rounded-full",s.enabled?"bg-green-500":"bg-gray-300")}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:s.url}),e.jsx("p",{className:"text-xs text-gray-500",children:s.lastCheck?`Last check: ${s.lastCheck.toLocaleString()}`:"Never checked"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(A,{checked:s.enabled,onCheckedChange:()=>se(s.id)}),e.jsx(n,{variant:"ghost",size:"icon",children:e.jsx(_,{className:"w-4 h-4"})})]})]},s.id))}),e.jsxs(n,{variant:"outline",className:"mt-4",children:[e.jsx(k,{className:"w-4 h-4 mr-1"}),"Add RSS Feed"]})]})]})]}),o==="stats"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.jsx(r,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Ie,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:f.totalProcessed}),e.jsx("p",{className:"text-xs text-gray-500",children:"Files Processed"})]})]})})}),e.jsx(r,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(G,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:f.avgProcessingTime}),e.jsx("p",{className:"text-xs text-gray-500",children:"Avg Time"})]})]})})}),e.jsx(r,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx($,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold",children:[f.successRate,"%"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Success Rate"})]})]})})}),e.jsx(r,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(H,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:f.storageUsed}),e.jsx("p",{className:"text-xs text-gray-500",children:"Storage"})]})]})})}),e.jsx(r,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:e.jsx(O,{className:"w-5 h-5 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:f.apiCalls.toLocaleString()}),e.jsx("p",{className:"text-xs text-gray-500",children:"API Calls"})]})]})})}),e.jsx(r,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(De,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold",children:[f.errorRate,"%"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Error Rate"})]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(r,{children:[e.jsx(N,{className:"pb-3",children:e.jsx(b,{className:"text-lg",children:"Processing Over Time"})}),e.jsx(d,{children:e.jsxs("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:[e.jsx(U,{className:"w-16 h-16 text-gray-300"}),e.jsx("span",{className:"ml-2 text-gray-400",children:"Chart placeholder"})]})})]}),e.jsxs(r,{children:[e.jsx(N,{className:"pb-3",children:e.jsx(b,{className:"text-lg",children:"Error Distribution"})}),e.jsx(d,{children:e.jsxs("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:[e.jsx(S,{className:"w-16 h-16 text-gray-300"}),e.jsx("span",{className:"ml-2 text-gray-400",children:"Chart placeholder"})]})})]})]})]})]})}export{Ve as WorkflowAndIntegrations,Ve as default};
//# sourceMappingURL=WorkflowAndIntegrations-CieH64zW.js.map
